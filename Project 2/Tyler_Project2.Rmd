---
title: "Tyler_Project2"
author: "GWU Intro to Data Science DATS 6101"
# date: "today"
date: "`r Sys.Date()`"
output:
  html_document:
    code_folding: hide
    number_sections: false
    toc: yes
    toc_depth: 3
    toc_float: yes
  pdf_document:
    toc: yes
    toc_depth: '3'
---

```{r init, include=FALSE}
# some of common options (and the defaults) are: 
# include=T, eval=T, echo=T, results='hide'/'asis'/'markup',..., collapse=F, warning=T, message=T, error=T, cache=T, fig.width=6, fig.height=4, fig.dim=c(6,4) #inches, fig.align='left'/'center','right', 
library(ezids)
# knitr::opts_chunk$set(warning = F, results = "markup", message = F)
knitr::opts_chunk$set(warning = F, results = "hide", message = F)
options(scientific=T, digits = 3) 
# options(scipen=9, digits = 3) 
# ‘scipen’: integer. A penalty to be applied when deciding to print numeric values in fixed or exponential notation.  Positive values bias towards fixed and negative towards scientific notation: fixed notation will be preferred unless it is more than ‘scipen’ digits wider.
# use scipen=999 to prevent scientific notation at all times
```

```{r init, echo=FALSE}
#Importing `ipums.csv` dataset
getwd()
ipums = data.frame(read.csv('ipums.csv'))

str(ipums)

#Dropping unnecessary columns: YEAR, EDUCD and EMPSTATD
library(dplyr)
ipums = select(ipums, c(2:5,7,9:10))

str(ipums)

#Using random sample data (as recommended) with new `ipumsdf`
set.seed(123)
ipumsdf = ipums[ sample(nrow(ipums),100000), ]
ipumsdf
```


```{r, results='markup'}
#Reformatting target column: EMPSTAT

#Checking for unique values
unique(ipumsdf$EMPSTAT)

#According to IPUMS, codes are the following:
# 0 = N/A
# 1 = Employed
# 2 = Unemployed
# 3 = Not in labor force

#Value counts of EMPSTAT 
EMPSTAT_counts = table(ipumsdf$EMPSTAT)
EMPSTAT_counts

#Dropping 0 and 3 values
ipumsdf = subset(ipumsdf, ipumsdf$EMPSTAT != 0 & ipumsdf$EMPSTAT != 3)

#New value counts
EMPSTAT_counts = table(ipumsdf$EMPSTAT)
EMPSTAT_counts

#Reformatting column to:
# 0 = Unemployed
# 1 = Employed



```


```{r, results='markup'}
#Reformatting columns: EDUC and WORKEDYR

#Checking for unique values
sort(unique(ipumsdf$EDUC))

#According to IPUMS, codes are the following:
# 0 = No schooling
# 1 = 4th grade (Elementary-school)
# 2 = 5th, 6th, 7th or 8th grade (Middle-school)
# 3 = 9th grade
# 4 = 10th grade
# 5 = 11th grade 
# 6 = 12th grade (High-school)
# 7 = 1st year college
# 8 = 2nd year college
# 10 = 4th year college (Undergraduate)
# 11 = 5+ year college (Masters or PHD)

#Value counts of EDUC 
EDUC_counts = table(ipumsdf$EDUC)
EDUC_counts
```


```{r, results='markup'}
#EDA 

#Proportion table for EDUC
table1 <- table(ipumsdf$EMPSTAT, ipumsdf$EDUC)

#EDUC barplot
barplot( prop.table(table1, 2),
         legend.text = TRUE,
         ylab = "Proportion surviving",
         xlab = "Gender",
         names.arg=c(),
         args.legend = list(x = "topright",
                          legend = c("Survived", "Did not survive"),
                           inset = c(- 0.065, 1.1),
                          cex = 0.75),
         main = "Barplot of proportions survived vs passenger sex")
```

